<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduction | JSON Policy</title>
    <meta name="generator" content="VuePress 1.6.0">
    
    <meta name="description" content="JSON Policy - Distributed Rule Engine">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="preload" href="/assets/css/0.styles.8968334b.css" as="style"><link rel="preload" href="/assets/js/app.c4123b23.js" as="script"><link rel="preload" href="/assets/js/2.d3ea8322.js" as="script"><link rel="preload" href="/assets/js/9.aba5de70.js" as="script"><link rel="prefetch" href="/assets/js/10.5ee64c80.js"><link rel="prefetch" href="/assets/js/11.b3a8b447.js"><link rel="prefetch" href="/assets/js/12.29061add.js"><link rel="prefetch" href="/assets/js/13.607e3aa6.js"><link rel="prefetch" href="/assets/js/14.8f8bcae9.js"><link rel="prefetch" href="/assets/js/15.e4a83481.js"><link rel="prefetch" href="/assets/js/16.bf02c3a1.js"><link rel="prefetch" href="/assets/js/17.5c717817.js"><link rel="prefetch" href="/assets/js/3.7c13d29b.js"><link rel="prefetch" href="/assets/js/4.b41e69dd.js"><link rel="prefetch" href="/assets/js/5.5bc5eaa4.js"><link rel="prefetch" href="/assets/js/6.e416f727.js"><link rel="prefetch" href="/assets/js/7.980d9cb6.js"><link rel="prefetch" href="/assets/js/8.39ee49f0.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8968334b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/img/logo.svg" alt="JSON Policy" class="logo"> <span class="site-name can-hide">JSON Policy</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/overview/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Overview
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Libraries" class="dropdown-title"><span class="title">Libraries</span> <span class="arrow down"></span></button> <button type="button" aria-label="Libraries" class="mobile-dropdown-title"><span class="title">Libraries</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/php-library/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/js-library/" class="nav-link">
  JavaScript
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/overview/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Overview
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Libraries" class="dropdown-title"><span class="title">Libraries</span> <span class="arrow down"></span></button> <button type="button" aria-label="Libraries" class="mobile-dropdown-title"><span class="title">Libraries</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/php-library/" class="nav-link">
  PHP
</a></li><li class="dropdown-item"><!----> <a href="/js-library/" class="nav-link">
  JavaScript
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Overview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/overview/" aria-current="page" class="active sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/overview/#core-concept" class="sidebar-link">Core Concept</a></li><li class="sidebar-sub-header"><a href="/overview/#real-life-use-case" class="sidebar-link">Real-Life Use Case</a></li><li class="sidebar-sub-header"><a href="/overview/#how-to-start" class="sidebar-link">How to Start</a></li></ul></li><li><a href="/overview/policy-statement.html" class="sidebar-link">Policy Statement</a></li><li><a href="/overview/policy-param.html" class="sidebar-link">Policy Param</a></li><li><a href="/overview/policy-condition.html" class="sidebar-link">Policy Condition</a></li><li><a href="/overview/policy-marker.html" class="sidebar-link">Policy Marker</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h1> <p>Conditional logic is inevitable when it comes to building applications for business. While it is easy to wrap certain parts of the implementation in conditional <code>IF-ELSE</code> constructs eventually you discover a few unpleasant facts:</p> <ul><li>As the codebase evolves, it starts to look more like a spaghetti</li> <li>Lost domain knowledge, as you can't recall or figure out why a specific condition exists</li> <li>The unit testing becomes a nightmare especially when you rewrite it every time conditions change by the business</li> <li>Number of production bugs grows as more conditions are introduced into the codebase</li></ul> <p>I've been professionally occupied in the tech industry since 2003 and personally experienced many times when business conditions changed a few times before even the first official alpha release to production. Every time it was forcing my team to either do substantial code refactoring to avoid many nested <code>IF-ELSE</code> statements or, due to limited time constraints, bite my lips and &quot;cook some spaghetti&quot; code.</p> <p>Partially out of frustration and mostly because of a strong desire for development excellence, I've designed the new domain-specific language to decouple conditional logic from the application. This way, you can focus on implementing clean, maintainable, and reusable code, while defining conditional logic as a separate artifact in form of JSON policies.</p> <p>If any business-related conditions change, you no longer need to modify the code. Simply adjust respective policies, and you good to go.</p> <h2 id="core-concept"><a href="#core-concept" class="header-anchor">#</a> Core Concept</h2> <p>A typical application works with at least one <code>resource</code>. It can be anything - user record, todo task, article, physical file, etc.</p> <p>A typical application also is invoked by somebody or something. It can a real human selecting a button on a website page, a scheduled cronjob triggered by an operating system or a programmatic RESTful API request. So the application executes when some authenticated or unauthenticated <code>identity</code> invokes it.</p> <p>Finally, last but not least, a typical application may perform one or a few (A) <code>actions</code> upon any given (R) <code>resource</code> based on (I) <code>identity's</code> request.</p> <p><img src="/assets/img/json-policy-relationships.png" alt="JSON Policy Relationships"></p> <p>Now, when the <code>identity</code> invokes an application, it typically wants the application to work with some <code>resources</code> to fulfill the request. It is the time when things get (C) <code>conditional</code>.</p> <p>It can be as simple as an anonymous user requests to update an existing user record or view premium content that is available only for paid members. It can be a very complex business condition as screening a specific category of articles until the end of a year for members under the age of 21 that live in New Jersey state.</p> <p>Disregarding how simple or complex the requirements are, it is apparent that each condition branches your codebase. The side effect of this is less maintainable application and way more unit testing.</p> <p>The <strong>core idea</strong> behind JSON policy is to define the collection of resources and parameters and under which circumstances they can be invoked.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;deny&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Car&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;view&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;purchase&quot;</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">car</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonPolicyManager</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>manager<span class="token punctuation">.</span><span class="token function">isAllowedTo</span><span class="token punctuation">(</span>car<span class="token punctuation">,</span> <span class="token string">'purchase'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Sorry, you are not allowed to purchase </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>car<span class="token punctuation">.</span>model<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    model<span class="token operator">:</span> <span class="token string">&quot;BMW 428i&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Any <a href="/overview/policy-statement.html">statement</a> or <a href="/overview/policy-param.html">param</a> can be conditional. It is where the true power of policies come into play.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;Statement&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;Effect&quot;</span><span class="token operator">:</span> <span class="token string">&quot;restrict&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;Resource&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Category:science:articles&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;Action&quot;</span><span class="token operator">:</span> <span class="token string">&quot;read&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;Condition&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;NotEquals&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;${USER.location.city}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;San Francisco&quot;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Param&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;Key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;api:endpoint&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://my-app-api.com&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Condition&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;Equals&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;${ENV.environment}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;Key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;api:endpoint&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://staging.my-app-api.com&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Condition&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;Equals&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;${ENV.environment}&quot;</span><span class="token operator">:</span> <span class="token string">&quot;staging&quot;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="real-life-use-case"><a href="#real-life-use-case" class="header-anchor">#</a> Real-Life Use Case</h2> <p>The first and so far the only known application that uses the JSON policy framework is the top 1% of the most popular WordPress plugins <a href="https://wordpress.org/plugins/advanced-access-manager/" target="_blank" rel="noopener noreferrer">Advanced Access Manager<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. It is installed and actively used on over 100,000 websites around the world.</p> <p><img src="/assets/img/aam-plugin.png" alt="Advanced Access Manager"></p> <p>Many WordPress developers that I've personally worked with, find JSON policies very useful and fascinating. This is what inspired me to offer the JSON policy framework as a stand-alone library.</p> <h2 id="how-to-start"><a href="#how-to-start" class="header-anchor">#</a> How to Start</h2> <p>The JSON policy framework currently is available for a limited number of languages. More supported languages will be added soon and depend on the popularity of this project. So, if you find this project interesting or useful, please don't be shy to share it with your audience and give a star on the <a href="https://github.com/jsonpolicy" target="_blank" rel="noopener noreferrer">Github repo<svg xmlns="http://www.w3.org/2000/svg" aria-labelledby="outbound-link-title" role="img" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><title id="outbound-link-title">(opens new window)</title> <path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>You can find detailed installation instructions for each supported language on its respective reference page. Just follow one of the following available links:</p> <ul><li><a href="/php-library/">PHP Installation Instructions</a></li> <li><a href="/js-library/">JavaScript Installation Instructions</a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/overview/policy-statement.html">
        Policy Statement
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.c4123b23.js" defer></script><script src="/assets/js/2.d3ea8322.js" defer></script><script src="/assets/js/9.aba5de70.js" defer></script>
  </body>
</html>
